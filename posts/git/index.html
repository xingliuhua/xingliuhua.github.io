<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>git - xingliuhua博客</title><meta name="Description" content="git"><meta property="og:title" content="git" />
<meta property="og:description" content="git" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://xingliuhua.github.io/posts/git/" /><meta property="og:image" content="https://xingliuhua.github.io/logo.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-05-06T17:55:28+08:00" />
<meta property="article:modified_time" content="2019-05-06T17:55:28+08:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://xingliuhua.github.io/logo.png"/>

<meta name="twitter:title" content="git"/>
<meta name="twitter:description" content="git"/>
<meta name="application-name" content="xingliuhua博客">
<meta name="apple-mobile-web-app-title" content="xingliuhua博客"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://xingliuhua.github.io/posts/git/" /><link rel="prev" href="https://xingliuhua.github.io/posts/tree/" /><link rel="next" href="https://xingliuhua.github.io/posts/docker-compose/" /><link rel="stylesheet" href="/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "git",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/xingliuhua.github.io\/posts\/git\/"
        },"genre": "posts","keywords": "git","wordcount":  5494 ,
        "url": "https:\/\/xingliuhua.github.io\/posts\/git\/","datePublished": "2019-05-06T17:55:28+08:00","dateModified": "2019-05-06T17:55:28+08:00","publisher": {
            "@type": "Organization",
            "name": "xingliuhua"},"author": {
                "@type": "Person",
                "name": "xingliuhua"
            },"description": "git"
    }
    </script></head>
    <body header-desktop="fixed" header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="xingliuhua博客"><img
        class="lazyload logo"
        src="/svg/loading.min.svg"
        data-src="/logo.png"
        data-srcset="/logo.png, /logo.png 1.5x, /logo.png 2x"
        data-sizes="auto"
        alt="/logo.png"
        title="/logo.png" />xingliuhua</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> 文章 </a><a class="menu-item" href="/tags/"> 标签 </a><a class="menu-item" href="/categories/"> 分类 </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="xingliuhua博客"><img
        class="lazyload logo"
        src="/svg/loading.min.svg"
        data-src="/logo.png"
        data-srcset="/logo.png, /logo.png 1.5x, /logo.png 2x"
        data-sizes="auto"
        alt="/logo.png"
        title="/logo.png" />xingliuhua</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        取消
                    </a>
                </div><a class="menu-item" href="/posts/" title="">文章</a><a class="menu-item" href="/tags/" title="">标签</a><a class="menu-item" href="/categories/" title="">分类</a><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">目录</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">git</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="https://xingliuhua/github.com.io" title="Author" target="_blank" rel="noopener noreffer author" class="author"><i class="fas fa-user-circle fa-fw"></i>xingliuhua</a></span>&nbsp;<span class="post-category">收录于 <a href="/categories/%E7%AC%94%E8%AE%B0/"><i class="far fa-folder fa-fw"></i>笔记</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2019-05-06">2019-05-06</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 5494 字&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 11 分钟&nbsp;</div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>目录</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ol>
    <li><a href="#快速入门">快速入门</a>
      <ol>
        <li><a href="#克隆仓库">克隆仓库</a></li>
        <li><a href="#在现有目录中初始化仓库">在现有目录中初始化仓库</a></li>
        <li><a href="#更新提交到仓库">更新提交到仓库</a></li>
        <li><a href="#检查当前文件状态">检查当前文件状态</a></li>
        <li><a href="#跟踪新文件">跟踪新文件</a></li>
        <li><a href="#忽略文件">忽略文件</a></li>
        <li><a href="#查看修改内容">查看修改内容</a></li>
        <li><a href="#提交">提交</a></li>
        <li><a href="#移除文件">移除文件</a></li>
        <li><a href="#查看提交历史">查看提交历史</a></li>
        <li><a href="#远程仓库">远程仓库</a></li>
        <li><a href="#查看远程仓库">查看远程仓库</a></li>
        <li><a href="#添加远程仓库">添加远程仓库</a></li>
        <li><a href="#从远程仓库中抓取与拉取">从远程仓库中抓取与拉取</a></li>
        <li><a href="#推送到远程仓库">推送到远程仓库</a></li>
        <li><a href="#查看远程仓库-1">查看远程仓库</a></li>
        <li><a href="#远程仓库的移除与重命名">远程仓库的移除与重命名</a></li>
      </ol>
    </li>
    <li><a href="#命令详解">命令详解</a>
      <ol>
        <li><a href="#git-add">git add</a></li>
        <li><a href="#查看更改记录">查看更改记录</a></li>
        <li><a href="#git-rm">git rm</a></li>
        <li><a href="#git-pull">git pull</a></li>
        <li><a href="#暂存stash">暂存stash</a></li>
        <li><a href="#checkout">checkout</a></li>
        <li><a href="#git-commit">git commit</a></li>
        <li><a href="#git-merge">git merge</a></li>
        <li><a href="#git-tag">git tag</a></li>
        <li><a href="#git-config">git config</a></li>
      </ol>
    </li>
    <li><a href="#git各区">git各区</a>
      <ol>
        <li><a href="#git本地仓库">git本地仓库</a></li>
        <li><a href="#工作区和暂存区">工作区和暂存区</a></li>
      </ol>
    </li>
    <li><a href="#git回退命令">Git回退命令</a>
      <ol>
        <li><a href="#git-checkout">git checkout</a></li>
        <li><a href="#git-restore">git restore</a></li>
        <li><a href="#git-reset">git reset</a></li>
      </ol>
    </li>
    <li><a href="#merge和rebase">merge和rebase</a></li>
  </ol>
</nav></div>
            </div><div class="content" id="content"><h1 id="快速入门">快速入门</h1>
<h2 id="克隆仓库">克隆仓库</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">git clone http://git.oschina.net/yiibai/git-start.git
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">//如果想在克隆远程仓库的时候，自定义本地仓库的名字，可以使用如下命令：
</span></span><span class="line"><span class="cl">git clone http://git.oschina.net/yiibai/git-start.git mygit-start
</span></span></code></pre></div><h2 id="在现有目录中初始化仓库">在现有目录中初始化仓库</h2>
<p>如果不克隆现有的仓库，而是打算使用 Git 来对现有的项目进行管理。假设有一个项目的目录是：D:\worksp\git_sample，只需要进入该项目的目录并输入：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">git init
</span></span></code></pre></div><h2 id="更新提交到仓库">更新提交到仓库</h2>
<p>工作目录下的每一个文件都不外乎这两种状态：已跟踪或未跟踪。 已跟踪的文件是指那些被纳入了版本控制的文件，在上一次快照中有它们的记录，在工作一段时间后，它们的状态可能处于未修改，已修改或已放入暂存区。 工作目录中除已跟踪文件以外的所有其它文件都属于未跟踪文件，它们既不存在于上次快照的记录中，也没有放入暂存区。 初次克隆某个仓库的时候，工作目录中的所有文件都属于已跟踪文件，并处于未修改状态</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./pic5.png"
        data-srcset="./pic5.png, ./pic5.png 1.5x, ./pic5.png 2x"
        data-sizes="auto"
        alt="./pic5.png"
        title="git文件状态" /></p>
<h2 id="检查当前文件状态">检查当前文件状态</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">git status
</span></span></code></pre></div><p>git status -s 命令或 git status &ndash;short 命令，将得到一种更为紧凑的格式输出。</p>
<h2 id="跟踪新文件">跟踪新文件</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">git add mytext.txt
</span></span><span class="line"><span class="cl">git add .
</span></span></code></pre></div><h2 id="忽略文件">忽略文件</h2>
<p>文件 .gitignore 的格式规范如下：</p>
<ul>
<li>所有空行或者以 ＃ 开头的行都会被 Git 忽略。</li>
<li>可以使用标准的 glob 模式匹配。</li>
<li>匹配模式可以以(/)开头防止递归。</li>
<li>匹配模式可以以(/)结尾指定目录。</li>
<li>要忽略指定模式以外的文件或目录，可以在模式前加上惊叹号(!)取反</li>
</ul>
<p>所谓的 glob 模式是指 shell 所使用的简化了的正则表达式。 星号(<em>)匹配零个或多个任意字符；[abc]匹配任何一个列在方括号中的字符(这个例子要么匹配一个字符 a，要么匹配一个字符 b，要么匹配一个字符 c)；问号(?)只匹配一个任意字符；如果在方括号中使用短划线分隔两个字符，表示所有在这两个字符范围内的都可以匹配(比如 [0-9] 表示匹配所有 0 到 9 的数字)。 使用两个星号(</em>) 表示匹配任意中间目录，比如a/**/z 可以匹配 a/z, a/b/z 或 a/b/c/z等。</p>
<h2 id="查看修改内容">查看修改内容</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">git diff
</span></span></code></pre></div><h2 id="提交">提交</h2>
<p>把暂存区的内容提交前先确定文件是否都添加到暂存区内了</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">Git commit -m &#34;提交信息&#34;
</span></span></code></pre></div><p>Git commit -a 参数可以把变化的文件先添加到暂存区并提交，换句话说Git 就会自动把所有已经跟踪过的文件暂存起来一并提交，从而跳过 git add，新增的为追踪的不行。</p>
<h2 id="移除文件">移除文件</h2>
<p>git rm会删除本地文件，推送后也会把仓库里的删除。
如果文件已经添加到缓存区了，那么git rm命令是删除不了的
可以使用下面两个命令：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">git rm -f 文件名 // 缓存区和工作目录的都会删除
</span></span><span class="line"><span class="cl">git rm --cached 文件名 // 只删除缓存区，工作目录的保留
</span></span></code></pre></div><h2 id="查看提交历史">查看提交历史</h2>
<p>git log 会按提交时间列出所有的更新，最近的更新排在最上面。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">Git log -p // 用来显示每次提交的内容差异
</span></span></code></pre></div><p>另外一个常用的选项是 &ndash;pretty。 这个选项可以指定使用不同于默认格式的方式展示提交历史。 这个选项有一些内建的子选项供你使用。 比如用 oneline 将每个提交放在一行显示，查看的提交数很大时非常有用。 另外还有 short，full 和 fuller 可以用，展示的信息或多或少有些不同</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">git log --pretty=oneline
</span></span></code></pre></div><h2 id="远程仓库">远程仓库</h2>
<p>可以有好几个远程仓库，通常有些仓库对你只读，有些则可以读写。 与他人协作涉及管理远程仓库以及根据需要推送或拉取数据。</p>
<h2 id="查看远程仓库">查看远程仓库</h2>
<p>git remote 命令。 它会列出你指定的每一个远程服务器的简写。 如果已经克隆了自己的仓库，那么至少应该能看到 origin - 这是 Git 给你克隆的仓库服务器的默认名字。
也可以指定选项 -v，会显示需要读写远程仓库使用的 Git 保存的简写与其对应的 URL。</p>
<h2 id="添加远程仓库">添加远程仓库</h2>
<p>运行 git remote add <!-- raw HTML omitted --> <!-- raw HTML omitted --> 添加一个新的远程 Git 仓库，同时指定一个可以轻松引用的简写</p>
<h2 id="从远程仓库中抓取与拉取">从远程仓库中抓取与拉取</h2>
<p>就如刚才所见，从远程仓库中获得数据，可以执行:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">git fetch [remote-name]
</span></span></code></pre></div><p>这个命令会访问远程仓库，从中拉取所有还没有的数据。执行完成后，将会拥有那个远程仓库中所有分支的引用，可以随时合并或查看。
必须注意 git fetch 命令会将数据拉取到本地仓库 - 它并不会自动合并或修改当前的工作</p>
<p>如果你有一个分支设置为跟踪一个远程分支，可以使用 git pull 命令来自动的抓取然后合并远程分支到当前分支。 这对你来说可能是一个更简单或更舒服的工作流程；默认情况下，git clone 命令会自动设置本地 master 分支跟踪克隆的远程仓库的 master。</p>
<h2 id="推送到远程仓库">推送到远程仓库</h2>
<p>git push [remote-name] [branch-name]。 当你想要将 master 分支推送到 origin 服务器时(再次说明，克隆时通常会自动帮你设置好那两个名字)</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">git push origin master
</span></span></code></pre></div><p>只有当你有所克隆服务器的写入权限，并且之前没有人推送过时，这条命令才能生效。 当你和其他人在同一时间克隆，他们先推送到上游然后你再推送到上游，你的推送就会毫无疑问地被拒绝。 你必须先将他们的工作拉取下来并将其合并进你的工作后才能推送。</p>
<h2 id="查看远程仓库-1">查看远程仓库</h2>
<p>如果想要查看某一个远程仓库的更多信息，可以使用 git remote show [remote-name] 命令</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">git remote show origin
</span></span><span class="line"><span class="cl">* remote origin
</span></span><span class="line"><span class="cl">  Fetch URL: http://git.oschina.net/yiibai/git-start.git
</span></span><span class="line"><span class="cl">  Push  URL: http://git.oschina.net/yiibai/git-start.git
</span></span><span class="line"><span class="cl">  HEAD branch: master
</span></span><span class="line"><span class="cl">  Remote branch:
</span></span><span class="line"><span class="cl">    master tracked
</span></span><span class="line"><span class="cl">  Local branch configured for &#39;git pull&#39;:
</span></span><span class="line"><span class="cl">    master merges with remote master
</span></span><span class="line"><span class="cl">  Local ref configured for &#39;git push&#39;:
</span></span><span class="line"><span class="cl">    master pushes to master (fast-forwardable)
</span></span></code></pre></div><p>它同样会列出远程仓库的 URL 与跟踪分支的信息。 这些信息非常有用，它告诉你正处于 master 分支，并且如果运行 git pull，就会抓取所有的远程引用，然后将远程 master 分支合并到本地 master 分支。 它也会列出拉取到的所有远程引用。
它也同样地列出了哪些远程分支不在你的本地，哪些远程分支已经从服务器上移除了，还有当你执行 git pull 时哪些分支会自动合并。</p>
<h2 id="远程仓库的移除与重命名">远程仓库的移除与重命名</h2>
<p>如果想要重命名引用的名字可以运行 git remote rename 去修改一个远程仓库的简写名。 例如，想要将 gs 重命名为 newgs，可以用 git remote rename 这样做：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">git remote rename gs newgs
</span></span></code></pre></div><p>值得注意的是这同样也会修改你的远程分支名字。 那些过去引用 gs/master 的现在会引用 newgs/master。</p>
<p>删除远程库:
git remote rm newgs</p>
<h1 id="命令详解">命令详解</h1>
<h2 id="git-add">git add</h2>
<p>git add 命令。 这是个多功能命令：可以用它开始跟踪新文件，或者把已跟踪的文件放到暂存区，还能用于合并时把有冲突的文件标记为已解决状态等。 将这个命令理解为“添加内容到下一次提交中”而不是“将一个文件添加到项目中”要更加合适。</p>
<h2 id="查看更改记录">查看更改记录</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">git log //查看更改记录
</span></span><span class="line"><span class="cl">git show 版本号 // 查看某次提交详细信息
</span></span></code></pre></div><h2 id="git-rm">git rm</h2>
<p>删除了文件，也属于文件变化，可以使用：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-tex" data-lang="tex"><span class="line"><span class="cl">git add 文件 //或者git rm 文件
</span></span><span class="line"><span class="cl">git commit
</span></span></code></pre></div><p>来提交变化。
如果想撤销删除，可以参考上面的撤销工作区、暂存区内容。</p>
<p>git rm &ndash;cached newfile_name 就可以将这个文件从暂存区移除掉，但是在工作区里没有消失，如果不加 &ndash;cached 参数，就会从工作区和版本库暂存区同时删除，相当于执行了 rm newfile_name 和 git add new_file 两条命令。</p>
<h2 id="git-pull">git pull</h2>
<p>执行git pull命令以将其本地存储库与远程存储库同步。</p>
<p>拉取远程代码时别人已经提的可能会与你的冲突
打开冲突文件，eg:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">a = 10
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">b = 20
</span></span><span class="line"><span class="cl">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
</span></span><span class="line"><span class="cl">c = a + b
</span></span><span class="line"><span class="cl">print(&#34;The value of c is  &#34;, c)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">def mul(a, b):
</span></span><span class="line"><span class="cl">    return (a * b)
</span></span><span class="line"><span class="cl">=======
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">def sum(a, b):
</span></span><span class="line"><span class="cl">    return (a+b)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">c = sum(a, b)
</span></span><span class="line"><span class="cl">print(&#34;The value of c is  &#34;, c)
</span></span><span class="line"><span class="cl">&gt;&gt;&gt;&gt;&gt;&gt;&gt; 01c54624879782e4657dd6c166ce8818f19e8251
</span></span></code></pre></div><p>并发现其它开发人员的提交的详细信息，提交ID为：01c54624879782e4657dd6c166ce8818f19e8251</p>
<p>解决完冲突，把冲突文件重新add 一次，再重新push一次，</p>
<h2 id="暂存stash">暂存stash</h2>
<p>代码写到一半需要切换分支，但是写到一半提交上去又不合适，可以先把改变暂存起来，等后面再还原。暂存起来的分支可以在其他分支还原。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">git stash // 把当前分支的改变暂存
</span></span><span class="line"><span class="cl">git stash list // 命令来查看已存在更改的列表。
</span></span><span class="line"><span class="cl">git stash pop // 命令即可从堆栈中删除更改并将其放置在当前工作目录中
</span></span><span class="line"><span class="cl">git stash show [&lt;stash&gt;] // 查看某次暂存内容
</span></span><span class="line"><span class="cl">git stash drop [-q|--quiet] [&lt;stash&gt;] // 删除暂存
</span></span><span class="line"><span class="cl">git stash apply [-q|--quiet] [&lt;stash&gt;] // 还原暂存
</span></span><span class="line"><span class="cl">git stash clear 
</span></span><span class="line"><span class="cl">git stash save [&lt;message&gt;] // 带信息的暂存
</span></span></code></pre></div><h2 id="checkout">checkout</h2>
<p>Git checkout用于切换分支或恢复文件。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">Git checkout -b dev origin/dev 生成一个新的dev分支，远程分支对应origin/dev
</span></span><span class="line"><span class="cl">Git branch -D 分支名 删除本地分支（不管有没有合并）
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">Git checkout 文件 // 恢复工作区修改
</span></span><span class="line"><span class="cl">Git checkout head 文件 // 恢复已经提交到暂存区的修改,工作区也不会保留修改
</span></span></code></pre></div><h2 id="git-commit">git commit</h2>
<p>&ndash;amend 修改当前最新的提交，可以修改提交信息、文件。注意，只能改当前最新的那次，如果想改以前的，那就麻烦一点，需要先回到那个版本才行。
eg:
Git commit &ndash;amend -m &ldquo;这才是正确的，刚才那次是错误的&rdquo;</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">Git commit -a -m &#34;xx&#34; // 添加到暂存区并提交文件
</span></span></code></pre></div><p>标准的git commit分为3个部分，header、body、footer,后两个一般不用。
heder结构为 type(scope):subject</p>
<p>Type一般有几种类型：</p>
<ul>
<li>feat:新功能</li>
<li>fix:修复bug</li>
<li>style:格式</li>
<li>refactor:代码重构</li>
<li>chore:项目构建</li>
</ul>
<p>比如fix(pay):修复了xxbug</p>
<h2 id="git-merge">git merge</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">Git merge dev // 从dev合并到当前分支
</span></span></code></pre></div><p>合并后可能会有冲突，如果想放弃合并回到刚才，使用git merger &ndash;abort命令。</p>
<h2 id="git-tag">git tag</h2>
<p>使用git tag命令来标记当前HEAD指针。在创建标签时需要提供-a选项的标签名称，并提供带-m选项的标签消息。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">Git tag -a &#39;v1.0.0&#39; -m &#34;v1.0.0 tag&#34;
</span></span></code></pre></div><p>如果要标记特定提交，则使用相应的COMMIT ID而不是HEAD指针。使用以下命令将标签推送到远程存储库。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">Git tag -a &#39;v1.0.0&#39; -m &#34;v1.0.0 tag&#34; 1852b48f8d1d86bce1694f99039833e3eaa55bc9
</span></span><span class="line"><span class="cl">Git push origin tag v1.0.0 // 推送tag至远程
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">Git show v1.0.0 // 查看tag详细信息
</span></span><span class="line"><span class="cl">Git tag -d v1.0.0 // 删除标签
</span></span></code></pre></div><h2 id="git-config">git config</h2>
<p>git的配置分为全局和各仓库的单独配置。
查看配置 git config &ndash;list
如果当前目录是git仓库就能看到该仓库的单独配置。
git config &ndash;global user.name配置全局用户名
git config &ndash;global user.email配置全局邮箱</p>
<p>git config &ndash;local user.name在仓库地址路径配置该仓库的特定用户名，如果不指定&ndash;local默认也是该效果，配置邮箱等信息同理。</p>
<p>如果不对各仓库配置自己的邮箱，可能会造成邮箱不必要的暴露。</p>
<h1 id="git各区">git各区</h1>
<h2 id="git本地仓库">git本地仓库</h2>
<p>各区之间数据状态转换流程</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./pic5.png"
        data-srcset="./pic5.png, ./pic5.png 1.5x, ./pic5.png 2x"
        data-sizes="auto"
        alt="./pic5.png"
        title="./pic5.png" /></p>
<h2 id="工作区和暂存区">工作区和暂存区</h2>
<p>我们先来理解下Git 工作区、暂存区和版本库概念</p>
<ul>
<li>
<p>工作区：就是你在电脑里能看到的目录,工作区就是项目所在的目录</p>
</li>
<li>
<p>暂存区：英文叫stage, 或index。一般存放在&quot;git目录&quot;下的index文件（.git/index）中，所以我们把暂存区有时也叫作索引（index）。文件修改后，用add命令放到暂存区，然后在通过commit命令放到分支上。每次的修改只有先add到暂存区才能被提交。</p>
</li>
<li>
<p>版本库：工作区有一个隐藏目录.git，这个不算工作区，而是Git的版本库。</p>
</li>
</ul>
<p>总结起来一个文件的状态通常可以分为：</p>
<p>不受版本控制的 untracked 状态
受版本控制并且已修改的 modified 状态
受版本控制已修改并提交到暂存区的 staged 状态
从暂存区已经提交到本地仓库的 committed 状态
提交到本地仓库未修改或者从远程仓库克隆下来的 unmodified 状态</p>
<h1 id="git回退命令">Git回退命令</h1>
<h2 id="git-checkout">git checkout</h2>
<p>这个命令又出现了，上次是总结 git branch 分支操作的时候，git checkout 可以用来新建或者切换分支，这次总结回退版本的命令，git checkout 也可以用来回退文件版本，很神奇吧。</p>
<p>其实这个命令的作用就是它单词的本义——检出，他的常用操作也取自这个意思，比如 git checkout branch_name 切换分支操作，实际上就是把指定分支在仓库中对应的所有文件检出来覆盖当前工作区，最终表现就是切换了分支。</p>
<p>而针对于文件的检出可以使用 git checkout &ndash; file_name，当不指定 commit id 就是将暂存区的内容恢复到工作区，也就可以达到回退本地修改的作用。</p>
<p>不过，这个身兼数职的 git checkout 命令现在可以轻松一些了，从 Git 2.23 版本开始引入了两个新的命令： git switch 用来切换分支，git restore用来还原工作区的文件</p>
<h2 id="git-restore">git restore</h2>
<p>这个命令是 Git 2.23 版本之后新加的，用来分担之前 git checkout 命令的功能,
git restore &ndash;staged 从暂存区撤销，回到工作区，就是git add 的逆操作。
git restore 从工作区撤销，就是放弃更改</p>
<h2 id="git-reset">git reset</h2>
<p>reset 重新设置的意思，其实就是用来设置分支的头部指向，当进行了一系列的提交之后，忽然发现最近的几次提交有问题，想从提交记录中删除，这是就会用到 git reset 命令，这个命令后面跟 commit id，表示当前分支回退到这个 commit id 对应的状态，之后的日志记录被删除，工作区中的文件状态根据参数的不同会恢复到不同的状态。</p>
<p>&ndash;soft: 被回退的那些版本的修改会被放在暂存区，可以再次提交。</p>
<p>&ndash;mixed: 默认选项，被回退的那些版本的修改会放在工作目录，可以先加到暂存区，然后再提交。</p>
<p>&ndash;hard: 被回退的那些版本的修改会直接舍弃，好像它们没有来过一样。</p>
<p>这样来看，git reset 命令好像是用来回退版本的，但是如果使用 git rest HEAD file_name 命令就可以将一个文件回退到 HEAD 指向版本所对应的状态，其实就是当前版本库中的状态，也就相当于还原了本地的修改。</p>
<p>git每次commit都是一个快照，方便以后查找或恢复。
在Git中，用HEAD表示当前版本，上一个版本就是HEAD^，上上一个版本就是HEAD^^，当然往上100个版本写100个^比较容易数不过来，所以写成HEAD~100。</p>
<p>git reset &ndash;hard HEAD^
这样就回到了上个快照，在查看git log发现刚提交的那条记录不在了。当然如果你还能记住刚才那个最新的快照id还是可以回去的。</p>
<p>如果记不住了就再也回不去了吗？
当然不是，Git提供了一个命令git reflog用来记录你的每一次命令。
然后
git reset &ndash;hard 快照id
就可以再回来啦。</p>
<p>git revert 也可以回退一个已经提交到仓库的版本
git revert 版本号 即可。会生成一个提交记录，提交记录明确记录着revert 的是哪个版本，原来的版本记录都是在的。如果对revert再revert一次，那就等于负负得正，回到原来的版本中。
<code>注意，revert针对最后一次的commit比较方便，如果想revert上上一次或更前面的，就会冲突。</code></p>
<p>如果修改已经push到远程了，需要本地回退后，在push一次</p>
<h1 id="merge和rebase">merge和rebase</h1>
<p>git rebase和git merge区别：
git rebase后变成了一个线，且不会生成新的合并节点。
git merge后两个分支记录依然各自存在，会生成新的合并节点。
git merge冲突后需要手动add并commit，git rebase自动生成一次提交。</p>
<p>当完成一个特性的开发并将其合并到 master 分支时，我们有两种方式：git merge 和 git rebase。
看merge图解：</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./pic1.png"
        data-srcset="./pic1.png, ./pic1.png 1.5x, ./pic1.png 2x"
        data-sizes="auto"
        alt="./pic1.png"
        title="./pic1.png" /></p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./pic2.png"
        data-srcset="./pic2.png, ./pic2.png 1.5x, ./pic2.png 2x"
        data-sizes="auto"
        alt="./pic2.png"
        title="./pic2.png" /></p>
<p>rebase图解：</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./pic3.png"
        data-srcset="./pic3.png, ./pic3.png 1.5x, ./pic3.png 2x"
        data-sizes="auto"
        alt="./pic3.png"
        title="./pic3.png" /></p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./pic4.png"
        data-srcset="./pic4.png, ./pic4.png 1.5x, ./pic4.png 2x"
        data-sizes="auto"
        alt="./pic4.png"
        title="./pic4.png" /></p>
<p>我们可以看到，merge后会产生一个多余的commit,但是每个提交记录先后顺序不变。</p>
<p>rebase没有生产新的commit，把两个分支合成一个线性的记录，可读性更强，但是提交记录的先后顺序变了。</p>
<p><strong>总结：</strong></p>
<p>当需要保留详细的合并信息的时候建议使用git merge，特别是需要将分支合并进入master分支时；当发现自己修改某个功能时，频繁进行了git commit提交时，发现其实过多的提交信息没有必要时，可以尝试git rebase。</p>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>更新于 2019-05-06</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/git/">git</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/posts/tree/" class="prev" rel="prev" title="树结构"><i class="fas fa-angle-left fa-fw"></i>树结构</a>
            <a href="/posts/docker-compose/" class="next" rel="next" title="docker-compose">docker-compose<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
<div id="comments"><div id="gitalk" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://github.com/gitalk/gitalk"></a>Gitalk</a>.
            </noscript></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">由 <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.101.0">Hugo</a> 强力驱动 | 主题 - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2023</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="https://xingliuhua/github.com.io" target="_blank">xingliuhua</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="回到顶部">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="查看评论">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><link rel="stylesheet" href="/lib/gitalk/gitalk.min.css"><link rel="stylesheet" href="/lib/lightgallery/lightgallery.min.css"><script type="text/javascript" src="/lib/gitalk/gitalk.min.js"></script><script type="text/javascript" src="/lib/smooth-scroll/smooth-scroll.min.js"></script><script type="text/javascript" src="/lib/autocomplete/autocomplete.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.stemmer.support.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.zh.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/lightgallery/lightgallery.min.js"></script><script type="text/javascript" src="/lib/lightgallery/lg-thumbnail.min.js"></script><script type="text/javascript" src="/lib/lightgallery/lg-zoom.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":15},"comment":{"gitalk":{"admin":["xingliuhua"],"clientID":"c0161bf1d93ccdd5f765","clientSecret":"3782f9a39ee0849148faa2ec75bb19d9964dda16","id":"2019-05-06T17:55:28+08:00","owner":"xingliuhua","repo":"xingliuhua.github.io","title":"git"}},"lightGallery":{"actualSize":false,"exThumbImage":"data-thumbnail","hideBarsDelay":2000,"selector":".lightgallery","speed":400,"thumbContHeight":80,"thumbWidth":80,"thumbnail":true},"search":{"highlightTag":"em","lunrIndexURL":"/index.json","lunrLanguageCode":"zh","lunrSegmentitURL":"/lib/lunr/lunr.segmentit.js","maxResultLength":10,"noResultsFound":"没有找到结果","snippetLength":50,"type":"lunr"}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
